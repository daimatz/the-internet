
<!DOCTYPE html>
<html>
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="0">
<head><title>The Internet</title>
<style>
html, body { margin: 0; padding: 0; width: 100%; height: 100%; }
* { border: 0; }
iframe { width: 100%; height: 100%; }
iframe.active { pointer-events: auto; }
iframe.passthrough { pointer-events: none; }
</style>
</head>
<body>

<script>
var internets = [
  { url: 'https://newspicks.com/', refresh_ms: 600000 },
  { url: 'https://hckrnews.com/', refresh_ms: 300000 },
  { url: 'http://digg.com/reader?i=1', refresh_ms: 300000 },
  { url: 'http://www.inoreader.com/', refresh_ms: 300000 },
];

var current;
var pos = location.href.lastIndexOf('?');
if (pos === -1) {
  current = 0;
} else {
  current = parseInt(location.href.substring(pos + 1)) % internets.length;
}
document.write('<iframe id="iframe" class="passthrough" src="' + internets[current].url + '"></iframe>');

// if there is no mousemove event while refresh_ms, reload whole contents.
var app = {};
app.record = function() {
  this.timeout = +new Date() + internets[current].refresh_ms;
};
app.next = function() {
  location.href = './internet.html?' + ((current+1) % internets.length);
}
app.check = function() {
  console.log("app.check");
  if (this.timeout == undefined) { this.record(); }
  if (this.timeout - new Date() < 0) { this.next(); }
};
// document.addEventListener('mousemove', function() { app.record(); }, false);
document.addEventListener('mouseover', function() {
  console.log('mouseover');
  var iframes = document.getElementsByTagName('iframe');
  for (var i = 0; i < iframes.length; i++) { iframes[i].className = 'active'; }
  app.record();
}, false);
document.addEventListener('mouseout', function() {
  console.log('mouseout');
  var iframes = document.getElementsByTagName('iframe');
  for (var i = 0; i < iframes.length; i++) { iframes[i].className = 'passthrough'; }
  app.record();
}, false);
setInterval(function() { app.check(); }, 500);
</script>

<div style="position:fixed;top:0px;right:0px;z-index:99999;">
  <button style="width:40px;height:40px;font-size:24px;" onclick="app.next(); return false;">&#8634;</>
</div>

</body>
</html>
