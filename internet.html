
<!DOCTYPE html>
<html>
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="0">
<head><title>The Internet</title>
<style>
html, body { margin: 0; padding: 0; width: 100%; height: 100%; }
* { border: 0; }
iframe.active { pointer-events: auto; }
iframe.passthrough { pointer-events: none; }
</style>
</head>
<body>

<script>
var LAYOUT = {
  ONLY: 1,
  TOP_BOTTOM: 2,
  // LEFT_RIGHT: 3,
  // LEFT_TOP_BOTTOM: 4,
  // TOP_LEFT_RIGHT: 5,
};
var internets = [
  {
    refresh_ms: 600000,
    layout: LAYOUT.ONLY,
    sources: [
      'https://newspicks.com/'
    ]
  },
  {
    refresh_ms: 300000,
    layout: LAYOUT.TOP_BOTTOM,
    sources: [
      'http://www.inoreader.com/',
      'https://hckrnews.com/'
    ]
  },
  {
    refresh_ms: 300000,
    layout: LAYOUT.ONLY,
    sources: [
      'http://jp.inoreader.com'
    ]
  }
];

var current;
var pos = location.href.lastIndexOf('?');
if (pos === -1) {
  current = 0;
} else {
  current = parseInt(location.href.substring(pos + 1)) % internets.length;
}
switch (internets[current].layout) {
  case LAYOUT.ONLY:
    document.write(
      '<iframe class="passthrough" src="' +
        internets[current].sources[0] +
      '" style="width:100%;height:100%;"></iframe>'
    );
    break;
  case LAYOUT.TOP_BOTTOM:
    document.write(
      '<iframe class="passthrough" src="' +
        internets[current].sources[0] +
      '" style="width:100%;height:50%;"></iframe>'
    );
    document.write('<br/>');
    document.write(
      '<iframe class="passthrough" src="' +
        internets[current].sources[1] +
      '" style="width:100%;height:50%;"></iframe>'
    );
    break;
}

// if there is no mousemove event while refresh_ms, reload whole contents.
var app = {};
app.record = function() {
  this.timeout = +new Date() + internets[current].refresh_ms;
};
app.next = function() {
  location.href = './internet.html?' + ((current+1) % internets.length);
}
app.check = function() {
  console.log("app.check");
  if (this.timeout == undefined) { this.record(); }
  if (this.timeout - new Date() < 0) { this.next(); }
};
// document.addEventListener('mousemove', function() { app.record(); }, false);
document.addEventListener('mouseover', function() {
  console.log('mouseover');
  var iframes = document.getElementsByTagName('iframe');
  for (var i = 0; i < iframes.length; i++) { iframes[i].className = 'active'; }
  app.record();
}, false);
document.addEventListener('mouseout', function() {
  console.log('mouseout');
  var iframes = document.getElementsByTagName('iframe');
  for (var i = 0; i < iframes.length; i++) { iframes[i].className = 'passthrough'; }
  app.record();
}, false);
setInterval(function() { app.check(); }, 500);
</script>

<div style="position:fixed;top:0px;right:0px;z-index:99999;">
  <button style="width:40px;height:40px;font-size:24px;" onclick="app.next(); return false;">&#8634;</>
</div>

</body>
</html>
